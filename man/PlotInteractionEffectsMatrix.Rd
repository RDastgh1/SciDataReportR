% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/PlotInteractionEffectMatrix.R
\name{PlotInteractionEffectsMatrix}
\alias{PlotInteractionEffectsMatrix}
\title{Plot Interaction Effects Matrix}
\usage{
PlotInteractionEffectsMatrix(
  Data,
  interVar = NULL,
  outcomeVars = NULL,
  predictorVars = NULL,
  covars = NULL,
  Relabel = TRUE,
  Ordinal = FALSE
)
}
\arguments{
\item{Data}{A data frame containing the variables to be analyzed}

\item{interVar}{Character string specifying the interaction variable (moderator). Can be categorical or continuous.}

\item{outcomeVars}{Character vector of outcome variable names (displayed on rows)}

\item{predictorVars}{Character vector of predictor variable names (displayed on columns)}

\item{covars}{Character vector of covariate names to include in the models}

\item{Relabel}{Logical indicating whether to use variable labels if available (default: TRUE)}

\item{Ordinal}{Logical indicating whether to treat ordered factors as numeric (default: FALSE)}
}
\value{
A list containing:
\describe{
\item{Unadjusted}{List with unadjusted results including:
\itemize{
\item C: Matrix of interaction coefficients
\item S: Matrix of slope direction indicators (1 = same, -1 = reversed)
\item P: Matrix of p-values
\item D: Matrix of interaction coefficient signs
\item Slope1: Matrix of slopes at low values of interVar (mean - 1SD for continuous, reference group for categorical)
\item Slope2: Matrix of slopes at high values of interVar (mean + 1SD for continuous, comparison group for categorical)
\item plot: ggplot object of the heatmap
\item pvaltable: P-value table in wide format
}
}
\item{FDRCorrected}{List with FDR-corrected results (same structure as Unadjusted)}
\item{Relabel}{Logical indicating whether relabeling was applied}
\item{Covariates}{Character vector of covariates used}
\item{interVar}{The interaction variable name}
\item{raw_data}{Processed data frame with all calculated values}
}
}
\description{
Creates a heatmap visualization of interaction effects between continuous variables,
showing whether interactions result in slope reversals or maintain the same direction.
}
\details{
The function fits linear models of the form: outcome ~ predictor * interVar + covariates
for each combination of outcome and predictor variables.

For continuous interaction variables, slopes are calculated at mean - 1SD and mean + 1SD.
For categorical interaction variables, slopes are calculated for each category.

The function then determines whether the interaction causes a slope reversal (opposite signs)
or maintains the same direction (same signs) for the predictor-outcome relationship.

Color coding:
\itemize{
\item Blue gradient: Significant interaction with slopes in the same direction
\item Red gradient: Significant interaction with slope reversal
\item White: Non-significant interaction (p > 0.05)
\item Grey: Missing data or model could not be fit
}

Darker colors indicate higher significance:
\itemize{
\item ***: p ≤ 0.001 (darkest)
\item **: p ≤ 0.01 (medium)
\item *: p ≤ 0.05 (light)
}
}
\examples{
\dontrun{
# With categorical interaction variable
results <- PlotInteractionEffectsMatrix(
  Data = mydata,
  interVar = "HIV_status",
  outcomeVars = sleep_vars,
  predictorVars = metabolites,
  covars = c("age", "sex")
)

# With continuous interaction variable
results <- PlotInteractionEffectsMatrix(
  Data = mydata,
  interVar = "age",
  outcomeVars = sleep_vars,
  predictorVars = metabolites,
  covars = c("sex", "BMI")
)

# Display the plot
print(results$Unadjusted$plot)
}

}
