% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Project_SOMClust.R
\name{Project_SOMClust}
\alias{Project_SOMClust}
\title{Project new data onto an existing SOM + cluster solution}
\usage{
Project_SOMClust(object, new_df, ClusterName = NULL)
}
\arguments{
\item{object}{A \code{Pipeline_SOMClust} object from a previous run.}

\item{new_df}{Data frame of new cases to project.}

\item{ClusterName}{Optional name for the cluster column; defaults to
\code{object$ClusterName}. If that column already exists in \code{new_df}
it is overwritten (with a message).}
}
\value{
A list of class \code{"Project_SOMClust"} with components:
\itemize{
\item \code{vars_used}, \code{ClusterName}, \code{complete_rows}
\item \code{df_with_clusters}: \code{new_df} with only the cluster
column appended.
\item \code{SOMProj}: list with training and projected distance
summaries, cluster-level flag summaries, comparison, and plots.
\item \code{ProbFit}: list with \code{node} (training node-level
posterior info), \code{individual} (projection-level info
including distance flags and z-scores), and probability plots.
\item \code{ModelInfo_SOM}, \code{ModelInfo_MClust}: references to the
original model objects for convenience.
}
}
\description{
Given a fitted \code{Pipeline_SOMClust} object, project a new data frame onto:
\itemize{
\item The same Z-score scaling (via SciDataReportR::Project_ZScore()).
\item The same SOM (kohonen), using \code{kohonen::map()}.
\item The same node-level latent profiles and posterior probabilities.
}

For each projected case, the function:
\itemize{
\item Assigns a SOM node and distance to BMU.
\item Maps node-level cluster/posterior probabilities to the individual.
\item Computes an overall SOM-distance z-score and flags:
\itemize{
\item \code{Flag_SOMDist_overallHigh} – distance > overall training p95.
\item \code{Flag_SOMDist_clusterHigh} – distance > cluster-specific
training p95 for that cluster.
}
}

Cluster-level summaries compare the fraction of high-distance projected
cases in each cluster to the fraction seen in training. A warning is issued
only if \emph{any} projected cluster has a higher proportion of
high-distance cases than any cluster in training.

Missing data:
\itemize{
\item Z-scores are computed for all rows, but only rows with complete
Z-scores are mapped to the SOM.
\item Rows with missing Z-scores receive NA for SOM_Node, SOM_Distance,
and the cluster label.
}
}
